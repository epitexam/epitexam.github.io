---
import { GITHUB_URL, SITE_TITLE } from "../consts";
import HeaderLink from "./HeaderLink.astro";

const navLinks = [
	{ href: "/", label: "Home" },
	{ href: "/about", label: "About" },
	{ href: "/blog", label: "Blog" },
	{ href: "/tools", label: "My tools" },
	{ href: "/contact", label: "Contact" },
];
---

<header class="site-header">
	<div class="header-inner">
		<a href="/" class="brand-link">{SITE_TITLE}</a>

		<nav class="desktop-nav">
			{
				navLinks.map(({ href, label }) => (
					<HeaderLink href={href}>{label}</HeaderLink>
				))
			}
		</nav>

		<div class="header-right">
			<a
				href={GITHUB_URL}
				target="_blank"
				class="social-link"
				aria-label="GitHub"
			>
				<svg
					viewBox="0 0 16 16"
					width="18"
					height="18"
					fill="currentColor"
				>
					<path
						d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"
					></path>
				</svg>
			</a>

			<button
				id="menu-toggle"
				class="menu-toggle"
				aria-label="Menu"
				aria-expanded="false"
			>
				<svg
					width="22"
					height="22"
					viewBox="0 0 22 22"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					stroke-linecap="round"
				>
					<line x1="2" y1="5" x2="20" y2="5"></line>
					<line x1="2" y1="11" x2="20" y2="11"></line>
					<line x1="2" y1="17" x2="20" y2="17"></line>
				</svg>
			</button>
		</div>
	</div>

	<div id="mobile-menu" class="mobile-menu" aria-hidden="true">
		<nav class="mobile-nav">
			{
				navLinks.map(({ href, label }) => (
					<HeaderLink href={href} class="mobile-link">
						{label}
					</HeaderLink>
				))
			}
		</nav>
	</div>
</header>

<script>
	(function () {
		var toggle = document.getElementById("menu-toggle");
		var menu = document.getElementById("mobile-menu");

		if (!toggle || !menu) return;

		var t = /** @type {HTMLElement} */ (toggle);
		var m = /** @type {HTMLElement} */ (menu);
		var open = false;

		function openMenu() {
			open = true;
			m.style.display = "block";
			t.setAttribute("aria-expanded", "true");
			m.setAttribute("aria-hidden", "false");
		}

		function closeMenu() {
			open = false;
			m.style.display = "none";
			t.setAttribute("aria-expanded", "false");
			m.setAttribute("aria-hidden", "true");
		}

		t.addEventListener("click", function () {
			if (open) closeMenu();
			else openMenu();
		});

		window.addEventListener("resize", function () {
			if (window.innerWidth > 768) closeMenu();
		});

		var links = m.querySelectorAll("a");
		for (var i = 0; i < links.length; i++) {
			links[i].addEventListener("click", function () {
				closeMenu();
			});
		}
	})();
</script>

<style>
	.site-header {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		z-index: 1000;
		background: rgb(10, 12, 20);
		border-bottom: 1px solid rgba(0, 255, 150, 0.15);
	}

	.header-inner {
		height: 60px;
		max-width: 960px;
		margin: 0 auto;
		padding: 0 1.25rem;
		display: -webkit-box;
		display: -ms-flexbox;
		display: flex;
		-webkit-box-align: center;
		-ms-flex-align: center;
		align-items: center;
		-webkit-box-pack: justify;
		-ms-flex-pack: justify;
		justify-content: space-between;
	}

	.brand-link {
		font-family: "Space Mono", monospace;
		font-weight: 700;
		font-size: 1rem;
		color: rgb(220, 255, 220);
		text-decoration: none;
		white-space: nowrap;
		-webkit-box-flex: 0;
		-ms-flex-positive: 0;
		flex-grow: 0;
		-ms-flex-negative: 0;
		flex-shrink: 0;
	}
	.brand-link::after {
		display: none !important;
	}

	.desktop-nav {
		display: -webkit-box;
		display: -ms-flexbox;
		display: flex;
		-webkit-box-align: center;
		-ms-flex-align: center;
		align-items: center;
	}
	.desktop-nav > :global(a) {
		margin-left: 1.75rem;
	}

	.header-right {
		display: -webkit-box;
		display: -ms-flexbox;
		display: flex;
		-webkit-box-align: center;
		-ms-flex-align: center;
		align-items: center;
		-webkit-box-flex: 0;
		-ms-flex-positive: 0;
		flex-grow: 0;
		-ms-flex-negative: 0;
		flex-shrink: 0;
	}

	.social-link {
		display: -webkit-box;
		display: -ms-flexbox;
		display: flex;
		-webkit-box-align: center;
		-ms-flex-align: center;
		align-items: center;
		color: rgba(220, 255, 220, 0.5);
		margin-right: 1rem;
		text-decoration: none;
	}
	.social-link::after {
		display: none !important;
	}
	.social-link:hover {
		color: rgb(0, 255, 150);
	}

	.menu-toggle {
		display: none;
		-webkit-box-align: center;
		-ms-flex-align: center;
		align-items: center;
		-webkit-box-pack: center;
		-ms-flex-pack: center;
		justify-content: center;
		width: 36px;
		height: 36px;
		padding: 0;
		background: none;
		border: 1px solid rgba(0, 255, 150, 0.25);
		border-radius: 4px;
		color: rgb(0, 255, 150);
		cursor: pointer;
		-webkit-tap-highlight-color: transparent;
	}

	.mobile-menu {
		display: none;
		background: rgb(10, 12, 20);
		border-top: 1px solid rgba(0, 255, 150, 0.1);
		border-bottom: 1px solid rgba(0, 255, 150, 0.1);
	}

	.mobile-nav {
		display: -webkit-box;
		display: -ms-flexbox;
		display: flex;
		-webkit-box-orient: vertical;
		-webkit-box-direction: normal;
		-ms-flex-direction: column;
		flex-direction: column;
		padding: 0.5rem 0;
	}

	.mobile-nav > :global(a),
	:global(a.mobile-link) {
		display: block;
		padding: 0.85rem 1.5rem;
		font-size: 1rem;
		border-bottom: 1px solid rgba(0, 255, 150, 0.06);
	}

	@media (max-width: 768px) {
		.desktop-nav {
			display: none;
		}
		.menu-toggle {
			display: -webkit-box;
			display: -ms-flexbox;
			display: flex;
		}
	}

	@media (min-width: 769px) {
		.mobile-menu {
			display: none !important;
		}
	}
</style>
