---
import { GITHUB_URL, SITE_TITLE } from "../consts";
import HeaderLink from "./HeaderLink.astro";

const navLinks = [
	{ href: "/", label: "Home" },
	{ href: "/about", label: "About" },
	{ href: "/blog", label: "Blog" },
	{ href: "/tools", label: "Tools" },
	{ href: "/contact", label: "Contact" },
];
---

<header class="site-header">
	<div class="header-inner">
		<div class="header-brand">
			<a href="/" class="brand-link">{SITE_TITLE}</a>
		</div>

		<nav class="desktop-nav">
			{
				navLinks.map(({ href, label }) => (
					<HeaderLink href={href}>{label}</HeaderLink>
				))
			}
		</nav>

		<div class="header-right">
			<a
				href={GITHUB_URL}
				target="_blank"
				class="social-link"
				aria-label="GitHub"
			>
				<svg
					viewBox="0 0 16 16"
					width="18"
					height="18"
					fill="currentColor"
					><path
						d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"
					></path></svg
				>
			</a>

			<button id="menu-toggle" class="menu-toggle" aria-label="Menu">
				<svg
					width="24"
					height="24"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
				>
					<line x1="3" y1="12" x2="21" y2="12"></line>
					<line x1="3" y1="6" x2="21" y2="6"></line>
					<line x1="3" y1="18" x2="21" y2="18"></line>
				</svg>
			</button>
		</div>
	</div>

	<div id="mobile-menu" class="mobile-menu">
		<nav class="mobile-nav">
			{
				navLinks.map(({ href, label }) => (
					<HeaderLink href={href} class="mobile-link">
						{label}
					</HeaderLink>
				))
			}
		</nav>
	</div>
</header>

<script>
	const toggle = document.getElementById("menu-toggle");
	const menu = document.getElementById("mobile-menu");

	toggle?.addEventListener("click", () => {
		menu?.classList.toggle("is-active");
	});

	window.addEventListener("resize", () => {
		if (window.innerWidth > 768) menu?.classList.remove("is-active");
	});
</script>

<style>
	.site-header {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		z-index: 1000;
		height: 60px;
		background: rgb(var(--bg));
		border-bottom: 1px solid rgba(var(--accent), 0.15);
		display: flex;
		align-items: center;
	}

	.header-inner {
		width: 100%;
		max-width: var(--max-width);
		margin: 0 auto;
		padding: 0 1.5rem;
		display: flex;
		align-items: center;
		justify-content: space-between;
	}

	.brand-link {
		font-family: var(--font-title);
		font-weight: 700;
		color: rgb(var(--text));
		text-decoration: none !important;
	}
	.brand-link::after {
		display: none !important;
	}

	.desktop-nav {
		display: flex;
		gap: 2rem;
	}

	.header-right {
		display: flex;
		align-items: center;
		gap: 1.5rem;
	}

	.social-link {
		color: rgba(var(--text), 0.5);
	}
	.social-link:hover {
		color: rgb(var(--accent));
	}

	.menu-toggle {
		display: none;
		background: none;
		border: 1px solid rgba(var(--accent), 0.2);
		color: rgb(var(--accent));
		cursor: pointer;
		padding: 4px;
		border-radius: var(--radius-sm);
	}

	.mobile-menu {
		display: none;
		position: fixed;
		top: 60px;
		left: 0;
		width: 100%;
		background: rgb(var(--bg));
		border-bottom: 1px solid rgba(var(--accent), 0.2);
		z-index: 999;
	}

	.mobile-menu.is-active {
		display: block;
	}

	.mobile-nav {
		display: flex;
		flex-direction: column;
		padding: 1rem 0;
	}

	.mobile-link {
		padding: 1rem 2rem;
		font-size: 1rem;
	}

	@media (max-width: 768px) {
		.desktop-nav {
			display: none;
		}
		.menu-toggle {
			display: flex;
		}
	}
</style>
